<head>
	<title>glubb</title>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCsOm46TUYe0lKZc9GF-M6eLvYnILABZUU&sensor=true"></script>
</head>

<body>
	{{> main}}
</body>

<template name="main">
	{{#if superMode}}
		{{> super}}
	{{else}}
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span6">
					{{> add}}
				</div>
				<div class="span6">
					{{> view}}
				</div>
			</div>	
		</div>
	{{/if}}
</template>

<template name="super">
	<div class="container">
		<div class="row">
			<div class="span8">
				<h2>glu<span class="blue">map</span>bb</h2>
				
				<div id="map_canvas" style="width:100%; height:500px"></div>
				
			</div>
			<div class="span4">
				{{> view}}
			</div>
		</div>
	</div>
</template>

<template name="add">
	<h2>glubb<span class="blue">add</span>erlitz</h2>
	{{#if locEnabled }}
		<form class="well">
			<textarea class="span12" placeholder="new glubb here" id="theText" rows="4"/>
			<input type="button" value="emit" id="add" class="btn" />
		</form>
	{{else}}
	<div class="well">
		Geolocation must be enabled in order to post to glubb.
	</div>
	{{/if }}
</template>

<template name="view">
	<h2><span class="blue">near</span>oglubbs    {{count}}</h2>
	{{#each messages}}
		<div class="well">
			<p><i class="icon-user" />&nbsp;&nbsp;{{text}}</p>
			<p><i class="icon-time" />&nbsp;&nbsp;{{format timestamp}}</p>
			<p><i class="icon-globe"/>&nbsp;&nbsp;{{distance loc}} km away</p>
		</div>
	{{/each}}
</template>
